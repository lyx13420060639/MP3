<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>半岛铁盒 - 周杰伦</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
            color: #333;
        }
        h1 {
            text-align: center;
            color: #1a1a1a;
        }
        .player-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .album-cover {
            width: 200px;
            height: 200px;
            border-radius: 8px;
            display: block;
            margin: 0 auto 20px;
            object-fit: cover;
        }
        #audio-player {
            width: 100%;
            margin-bottom: 20px;
        }
        #lyrics-container {
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
            line-height: 1.6;
            padding: 10px;
            border-left: 3px solid #1db954;
        }
        .lyric-line {
            margin: 12px 0;
            transition: all 0.3s;
        }
        .lyric-line.active {
            color: #1db954;
            font-weight: bold;
            font-size: 1.1em;
        }
        .error {
            color: #d32f2f;
            padding: 10px;
            background-color: #ffebee;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <h1>半岛铁盒 - 周杰伦</h1>
        
        <!-- 专辑封面 -->
        <img 
            src="./半岛铁盒 - 周杰伦.jpg" 
            alt="搁浅 - 专辑封面" 
            class="album-cover"
            onerror="this.src='https://via.placeholder.com/200?text=封面加载失败'"
        >
        
        <!-- 音频播放器 -->
        <audio id="audio-player" controls>
            <source src="./半岛铁盒 - 周杰伦.mp3" type="audio/mpeg">
            您的浏览器不支持音频播放。
        </audio>

        <!-- 歌词显示区域 -->
        <div id="lyrics-container">
            <p>歌词加载中...</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const audioPlayer = document.getElementById('audio-player');
            const lyricsContainer = document.getElementById('lyrics-container');
            
            // 使用相对路径加载歌词（GitHub Pages 适配）
            fetch('./半岛铁盒 - 周杰伦.lrc')
    .then(response => {
        if (!response.ok) throw new Error(`HTTP 错误！状态码: ${response.status}`);
        return response.text();
    })
    .then(data => {
        const lines = data.split('\n');
        const lyrics = [];
        
        lines.forEach(line => {
            // 修改正则表达式，支持两位或三位小数
            const timeMatch = line.match(/\[(\d{2}):(\d{2})\.(\d{2,3})\](.*)/);
            if (timeMatch) {
                const minutes = parseInt(timeMatch[1]);
                const seconds = parseInt(timeMatch[2]);
                const milliseconds = parseInt(timeMatch[3].padEnd(3, '0')); // 补齐三位（如 "50" → "500"）
                const text = timeMatch[4].trim();
                
                if (text) {
                    const timeInSeconds = minutes * 60 + seconds + milliseconds / 1000;
                    lyrics.push({ time: timeInSeconds, text });
                }
            }
        });

        if (lyrics.length === 0) {
            throw new Error("未找到有效歌词行！请检查 .lrc 文件格式（时间标签应为 [mm:ss.xx] 或 [mm:ss.xxx]）。");
        }

        // 显示歌词并绑定时间同步逻辑（保持原代码不变）
        lyricsContainer.innerHTML = '';
        lyrics.forEach(lyric => {
            const p = document.createElement('p');
            p.className = 'lyric-line';
            p.dataset.time = lyric.time;
            p.textContent = lyric.text;
            lyricsContainer.appendChild(p);
        });

        audioPlayer.addEventListener('timeupdate', () => {
            const currentTime = audioPlayer.currentTime;
            const lyricLines = document.querySelectorAll('.lyric-line');
            
            let activeLine = null;
            lyricLines.forEach(line => {
                const lineTime = parseFloat(line.dataset.time);
                if (currentTime >= lineTime) {
                    activeLine = line;
                }
            });

            lyricLines.forEach(line => line.classList.remove('active'));
            if (activeLine) {
                activeLine.classList.add('active');
                activeLine.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        });
    })
    .catch(error => {
        console.error('错误:', error);
        lyricsContainer.innerHTML = `
            <div class="error">
                <h3>歌词加载失败</h3>
                <p>${error.message}</p>
                <p>请检查：</p>
                <ul>
                    <li>1. 文件是否已上传到 GitHub 仓库</li>
                    <li>2. 文件名是否完全匹配（包括大小写和空格）</li>
                    <li>3. 文件内容是否符合 LRC 格式（时间标签应为 [mm:ss.xx] 或 [mm:ss.xxx]）</li>
                </ul>
            </div>
        `;
        });
    });
    </script>
</body>
</html>











